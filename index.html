
<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Infinity Tycoon ‚Äì Map FIXED</title>

<style>
html,body{
  margin:0;
  overflow:hidden;
  font-family:system-ui,Arial;
  background:
    radial-gradient(circle at 20% 30%, #1e2a5f, transparent 40%),
    radial-gradient(circle at 80% 70%, #0e5a4f, transparent 35%),
    linear-gradient(180deg,#05060f,#0a0f2a);
  color:#fff;
}
canvas{
  display:block;
}
#top{
  position:fixed;
  top:10px;left:10px;right:10px;
  display:flex;
  gap:10px;
  z-index:10;
  flex-wrap:wrap;
}
.badge{
  background:rgba(20,25,60,.9);
  border-radius:20px;
  padding:8px 14px;
  box-shadow:0 6px 20px rgba(0,0,0,.4);
  font-size:14px;
}
#hint{
  position:fixed;
  bottom:12px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.6);
  padding:8px 14px;
  border-radius:16px;
  font-size:13px;
}
</style>
</head>

<body>

<div id="top">
  <div class="badge">üí∞ <span id="money">0</span></div>
  <div class="badge">üè≠ Gy√°rak: <span id="factories">1</span></div>
</div>

<div id="hint">
  üëâ H√∫zd a t√©rk√©pet ‚Ä¢ Tapints a gy√°rra
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
let W,H;
function resize(){
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
window.addEventListener("resize",resize);
resize();

/* ===== KAMERA ===== */
let camera = {x:0,y:0,zoom:1};
let dragging=false,start={};

/* ===== √ÅLLAPOT ===== */
let money = 0;

/* ===== KEZD≈ê GY√ÅR (FIX!) ===== */
const factories = [
  {x:0,y:0,level:1}
];

/* AUTO F√ìKUSZ */
camera.x = factories[0].x;
camera.y = factories[0].y;

/* ===== INPUT ===== */
canvas.addEventListener("pointerdown",e=>{
  dragging=true;
  start.x=e.clientX;
  start.y=e.clientY;
});
canvas.addEventListener("pointermove",e=>{
  if(!dragging) return;
  camera.x -= (e.clientX-start.x)/camera.zoom;
  camera.y -= (e.clientY-start.y)/camera.zoom;
  start.x=e.clientX;
  start.y=e.clientY;
});
canvas.addEventListener("pointerup",()=>dragging=false);

/* ===== KATTINT√ÅS GY√ÅRRA ===== */
canvas.addEventListener("click",e=>{
  const wx=(e.clientX-W/2)/camera.zoom+camera.x;
  const wy=(e.clientY-H/2)/camera.zoom+camera.y;
  factories.forEach(f=>{
    if(Math.hypot(wx-f.x,wy-f.y)<60){
      f.level++;
    }
  });
});

/* ===== GAME LOOP ===== */
function loop(){
  ctx.clearRect(0,0,W,H);

  // ipari glow
  ctx.fillStyle="rgba(80,200,255,.05)";
  ctx.fillRect(0,0,W,H);

  factories.forEach(f=>{
    const sx=(f.x-camera.x)*camera.zoom+W/2;
    const sy=(f.y-camera.y)*camera.zoom+H/2;

    ctx.beginPath();
    ctx.ellipse(sx,sy+22,70,30,0,0,Math.PI*2);
    ctx.fillStyle="rgba(0,255,200,.25)";
    ctx.fill();

    ctx.fillStyle="#4fd1c5";
    ctx.fillRect(sx-40,sy-40,80,80);

    ctx.fillStyle="#000";
    ctx.font="14px system-ui";
    ctx.textAlign="center";
    ctx.fillText("Lv."+f.level,sx,sy+5);

    money += f.level*0.02;
  });

  document.getElementById("money").textContent = Math.floor(money);
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
¬†